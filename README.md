# Solana Cash Machine 2

A comprehensive gaming platform built on Solana with provably fair games and instant payouts.

## Features

### ðŸŽ® Games Available
- **Blackjack** - Classic card game with splitting, doubling, surrender, and 3:2 blackjack payouts
- **Dice** - Simple dice rolling with customizable predictions
- **Slots** - Crypto-themed slot machine with multiple paylines
- **Ship Captain Crew** - Traditional dice game with maritime theme

### âš¡ Core Features
- **Provably Fair Gaming** - All games use deterministic randomness with server/client seeds
- **Solana Integration** - Connect with any Solana wallet
- **Instant Payouts** - Immediate settlement of winnings
- **Modern UI** - Beautiful, responsive interface with animations
- **Real-time Gaming** - Live game state management

### ðŸ”’ Security
- JWT-based authentication
- Rate limiting and abuse prevention
- Secure API endpoints
- Client-side wallet integration

## Tech Stack

### Backend (Server)
- **Node.js & TypeScript** - Core runtime and language
- **Express.js** - Web framework
- **JWT** - Authentication
- **Jest** - Testing framework
- **MongoDB** - Database (via models)

### Frontend (Client)
- **React 19** - Frontend framework
- **TypeScript** - Type safety
- **Tailwind CSS** - Styling
- **Framer Motion** - Animations
- **Solana Wallet Adapter** - Wallet integration

## Getting Started

### Prerequisites
- Node.js 16+
- npm or yarn
- Solana wallet (Phantom, Solflare, etc.)

### Installation

1. **Clone the repository**
   ```bash
   git clone <repository-url>
   cd solana-cash-machine-2
   ```

2. **Install server dependencies**
   ```bash
   cd server
   npm install
   ```

3. **Install client dependencies**
   ```bash
   cd ../client
   npm install
   ```

4. **Environment Setup**
   
   **Server (.env)**
   ```env
   NODE_ENV=development
   PORT=3001
   JWT_SECRET=your-jwt-secret
   MONGODB_URI=mongodb://localhost:27017/solana-cash-machine
   ```

   **Client (.env)**
   ```env
   REACT_APP_API_URL=http://localhost:3001
   REACT_APP_SERVER_API_KEY=dev_api_key_12345
   REACT_APP_SOLANA_RPC_URL=https://api.devnet.solana.com
   REACT_APP_SOLANA_NETWORK=devnet
   ```

### Running the Application

1. **Start the server**
   ```bash
   cd server
   npm start
   ```

2. **Start the client**
   ```bash
   cd client
   npm start
   ```

3. **Open your browser**
   - Frontend: http://localhost:3000
   - Backend API: http://localhost:3001

## Game Flow

### 1. Wallet Connection
- Users connect their Solana wallet using the wallet adapter
- Authentication is handled automatically upon connection

### 2. Game Selection
- Browse available games in the lobby
- View game statistics, betting limits, and house edge
- Filter games by category

### 3. Game Setup
- Select bet amount within game limits
- Configure game-specific options (e.g., dice predictions, slot paylines)
- Game creates a provably fair seed combination

### 4. Gameplay
- **Blackjack**: Hit, stand, double down, split, or surrender
- **Dice**: Set prediction and roll
- **Slots**: Spin reels with selected paylines
- **Ship Captain Crew**: Roll dice to find ship, captain, and crew

### 5. Results
- Instant result calculation
- Winnings credited immediately
- Complete action history available

## API Endpoints

### Authentication
- `POST /auth/login` - Wallet-based login
- `POST /auth/refresh` - Refresh JWT token

### Games
- `GET /games/supported` - List available games
- `POST /games/create` - Create new game session
- `POST /games/play` - Make game moves
- `GET /games/session/:id` - Get game session details
- `GET /games/history` - Get game history
- `POST /games/cancel/:id` - Cancel game session

## Game Implementation Details

### Blackjack Features
- **Standard Rules** - Hit, stand, double down, split, surrender
- **Dealer Hits Soft 17** - Enhanced house rules
- **3:2 Blackjack Payout** - Traditional payouts
- **Action History** - Complete move tracking
- **Split Hands** - Full split functionality with separate hand management

### Provably Fair System
All games use a deterministic random number generator with:
- **Server Seed** - Generated by server (hashed and provided to client)
- **Client Seed** - Provided by client for additional entropy
- **Nonce** - Incremental counter for each random number
- **Verification** - Client can verify all results post-game

### Security Measures
- Rate limiting on API endpoints
- JWT token expiration and refresh
- Input validation and sanitization
- Error handling and logging
- Secure random number generation

## Development

### Running Tests
```bash
# Server tests
cd server
npm test

# Client tests  
cd client
npm test
```

### Code Structure

**Server Structure:**
```
server/
â”œâ”€â”€ providers/          # Game logic implementations
â”œâ”€â”€ routes/            # API endpoints
â”œâ”€â”€ services/          # Business logic services
â”œâ”€â”€ models/            # Data models
â”œâ”€â”€ types/             # TypeScript type definitions
â””â”€â”€ __tests__/         # Test files
```

**Client Structure:**
```
client/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/    # React components
â”‚   â”œâ”€â”€ hooks/         # Custom React hooks
â”‚   â”œâ”€â”€ services/      # API services
â”‚   â”œâ”€â”€ contexts/      # React contexts
â”‚   â””â”€â”€ types/         # TypeScript types
```

### Contributing
1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Add tests for new functionality
5. Submit a pull request

## License

This project is licensed under the MIT License - see the LICENSE file for details.

## Support

For support and questions:
- Create an issue in the repository
- Check the documentation
- Review the test files for usage examples